function testCustomPrior ()

disp('Test custom prior implementation');
try
    dummyFunction = @(x)log(mvnpdf(x));
    nPars = 1;
    nGenerations = [10,100];
    customPrior = @(x,mu,cov)mvnpdf(x,mu,cov);
    customRange = @(mu,cov)randn(1)*cov+mu;
    mu = 0.5;
    cov = 2;
    fprintf('\nTrying the posterior sampling with custom multivariate function\n');
    [a,b,acc,post,fits] = de_mcmc(@(evalPars) feval(dummyFunction,evalPars),customPrior, 'customPrior', customPrior, customRange, 'nGenerations',nGenerations);
    fprintf('Passed\n');
catch e
    disp('Failed');
    for iter = 1:length(e.stack)
        disp(e.stack(iter).file);
        fprintf('function name: %s\n',e.stack(iter).name);
        fprintf('line number: %d\n',e.stack(iter).line);
    end
    disp(e.message);
end

try
    fprintf('\nTesting correctness of the returned best solutions\n');
    testOutput = dummyFunction(a);
    if testOutput == b
        fprintf('Passed\n');
    else
        e = MException('Fitness:PopulationEvaluation:valueMismatch','Something went wrong with evaluting the fitness');
        throw(e);
    end
catch e
    disp('Failed');
    for iter = 1:length(e.stack)
        disp(e.stack(iter).file);
        fprintf('function name: %s\n',e.stack(iter).name);
        fprintf('line number: %d\n',e.stack(iter).line);
    end
    disp(e.message);
end

end